//////////////////////// JAVASCRIPT FOR GIFT GUIDE 2014 /////////////////////
//Preserve category and price selections as global variables
var category="*",max_price="*",app={init:function(){app.populate_gifts();app.gift_hover();app.isotope();app.toggle_lightbox();app.place_lightbox();app.load_sharebox();app.toggle_sharebox();app.share_gift();app.share_page();app.mobile_filters()},populate_gifts:function(){var e="",t;for(var n in gifts)e+='<div class="gift '+gifts[n].category+'" data-cost="'+gifts[n].cost+'" data-hash="'+gifts[n].photo_url+'"> <div class="gift-name" data-brand="'+gifts[n].location+'">'+gifts[n].product_name+'</div><div class="gift-more">READ MORE</div><div class="gift-social"><span class="icon-facebook"></span><span class="icon-twitter"></span></div><img src="images/gifts/'+gifts[n].photo_url+'.jpg" /></div>';var r=$(e);$("#gifts").isotope("insert",r);$("#gifts").imagesLoaded(function(){$("#lb-overlay").removeClass("loading");$("#gift-loader").removeClass("visible");$("#gifts").isotope("reLayout")})},gift_hover:function(){$(".gift").hover(function(){$(this).find(".gift-name").addClass("visible");$(this).find(".gift-more").addClass("visible");$(this).find(".gift-social").addClass("visible")},function(){$(this).find(".gift-name").removeClass("visible");$(this).find(".gift-more").removeClass("visible");$(this).find(".gift-social").removeClass("visible")})},isotope:function(){$(".filters ul li").on("click",function(){$(this).parent().find("li").removeClass("selected");$(this).addClass("selected");$(this).parent().parent().attr("id")==="categories"?category=$(this).attr("data-filter"):max_price=$(this).attr("data-filter");$container.isotope({filter:function(){var e=$(this).attr("data-cost");if(max_price!=="*")return $(this).hasClass(category)||category==="*"?parseInt(e,10)<=Number(max_price):!1;if($(this).hasClass(category)||category==="*")return!0}});return!1})},populate_lightbox:function(e){$("#lb-image").css("background-image","url('images/gifts/"+e[0].photo_url+".jpg')");$("#lb-name").html(e[0].product_name);$("#lb-brand").html(e[0].location);var t=e[0].cost.toString();t.charAt(t.length-2)==="."&&(t+="0");$("#lb-price span").html(t);$("#lb-desc").html(e[0].description);$("#lb-link a").attr("href",e[0].buy_url);$("#lb-social").attr("data-hash",e[0].photo_url)},toggle_lightbox:function(){$(".gift").on("click",function(){var e=$(this).find(".gift-name").text(),t=$.grep(gifts,function(t){return t.product_name===e});app.populate_lightbox(t);$("#lb-overlay").addClass("visible");$("#lightbox").addClass("visible");updateOmniture()});$("#lb-close").on("click",function(){$("#lb-overlay").removeClass("visible");$("#lightbox").removeClass("visible")});$("#lb-overlay").on("click",function(){$("#lb-overlay").removeClass("visible");$("#lightbox").removeClass("visible")})},place_lightbox:function(){var e=$("#panel").css("width");e.slice(-2)==="px"&&(e=e.slice(0,-2));Number(e)>306&&(e=0);var t=$("#lightbox").width(),n=$("#lightbox").height(),r=(window.innerHeight-Number(n))/2,i=(window.innerWidth-Number(e)-Number(t))/2+Number(e);$("#lightbox").css("top",r+"px").css("left",i+"px")},load_sharebox:function(){var e=location.hash.slice(1),t=$.grep(gifts,function(t){return t.photo_url===e});if(typeof t[0]!="undefined"&&typeof t[0]!=undefined){$("#sharebox").addClass("visible");app.populate_sharebox(t)}},populate_sharebox:function(e){$("#sb-image").css("background-image","url('images/gifts/"+e[0].photo_url+".jpg')");$("#sb-name").html(e[0].product_name);$("#sb-brand").html(e[0].location);$("#sb-price span").html(e[0].cost);$("#sb-desc").html(e[0].description);$("#sb-link a").attr("href",e[0].buy_url)},toggle_sharebox:function(){$("#sb-close").on("click",function(){$("#sharebox").removeClass("visible")})},tweet_item:function(e){var t="Check out what I found on Baltimore Sun's Gift Guide",n="http://data.baltimoresun.com/gift-guide-2014/index.html%23"+e,r="https://twitter.com/intent/tweet?text="+t+"&url="+n+"&tw_p=tweetbutton";window.open(r,"mywin","left=200,top=200,width=500,height=300,toolbar=1,resizable=0");return!1},facebook_item:function(e,t,n){var r="http://data.baltimoresun.com/gift-guide-2014/images/gifts/"+e+".jpg",i="Gift Guide 2014";t=t.replace("&","%26");n=n.replace("&","%26");var s="Check out what I found on Baltimore Sun's Gift Guide: "+t+" at "+n,o="http://data.baltimoresun.com/gift-guide-2014/index.html%23"+e,u="https://www.facebook.com/dialog/feed?display=popup&app_id=310302989040998&link="+o+"&picture="+r+"&name="+i+"&description="+s+"&redirect_uri=http://data.baltimoresun.com";window.open(u,"mywin","left=200,top=200,width=500,height=300,toolbar=1,resizable=0");return!1},pin_item:function(e,t,n){var r="http://data.baltimoresun.com/gift-guide-2014%23"+e,i="http://data.baltimoresun.com/gift-guide-2014/images/gifts-large/"+e+".jpg",s="Check out what I found on Baltimore Sun's Gift Guide: "+t+" at "+n,o="https://www.pinterest.com/pin/create/button/?url="+r+"&media="+i+"&description="+s;window.open(o,"mywin","left=200,top=200,width=500,height=300,toolbar=1,resizable=0");return!1},share_gift:function(){$("#lb-social .icon-twitter").on("click",function(){var e=$(this).parent().attr("data-hash");app.tweet_item(e)});$("#lb-social .icon-facebook").on("click",function(){var e=$(this).parent().attr("data-hash"),t=$(this).parent().parent().find("#lb-name").text(),n=$(this).parent().parent().find("#lb-brand").text();app.facebook_item(e,t,n)});$("#lb-social .icon-pinterest").on("click",function(){var e=$(this).parent().attr("data-hash"),t=$(this).parent().parent().find("#lb-name").text(),n=$(this).parent().parent().find("#lb-brand").text();app.pin_item(e,t,n)})},mobile_filters:function(){$(".list-header-mobile span").on("click",function(){if(!$(this).hasClass("reverse")){$(".list-header-mobile span").removeClass("reverse");$(this).addClass("reverse");$(".filters ul").removeClass("visible");$(this).parent().parent().find("ul").addClass("visible")}else{$(".list-header-mobile span").removeClass("reverse");$(".filters ul").removeClass("visible")}});$(".filters ul li").on("click",function(){$(".filters ul").removeClass("visible");$(".list-header-mobile span").removeClass("reverse");var e=$(this).data("label");$(this).parent().parent().find(".list-header-mobile span").html(e)})},share_page:function(){$("#share-tools .icon-twitter").on("click",function(){var e="Don't stress - find the perfect gift with the Baltimore Sun gift guide.",t="http://data.baltimoresun.com/gift-guide-2014/",n="https://twitter.com/intent/tweet?text="+e+"&url="+t+"&tw_p=tweetbutton";window.open(n,"mywin","left=200,top=200,width=500,height=300,toolbar=1,resizable=0");return!1});$("#share-tools .icon-facebook").on("click",function(){var e="http://data.baltimoresun.com/gift-guide-2014/images/present.jpg",t="Baltimore Sun Gift Guide",n="Don't stress - find the perfect gift with the Baltimore Sun gift guide.",r="http://data.baltimoresun.com/gift-guide-2014/",i="https://www.facebook.com/dialog/feed?display=popup&app_id=310302989040998&link="+r+"&picture="+e+"&name="+t+"&description="+n+"&redirect_uri=http://data.baltimoresun.com";window.open(i,"mywin","left=200,top=200,width=500,height=300,toolbar=1,resizable=0");return!1})}};$(document).ready(function(){app.init()});$(window).resize(function(){app.place_lightbox()});